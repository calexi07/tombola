<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tombola The Flower Station</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Lato:wght@300;400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #fdf5f8 0%, #f8f4f0 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        /* Floral decorations */
        body::before,
        body::after {
            content: 'üå∏';
            position: fixed;
            font-size: 60px;
            opacity: 0.15;
            z-index: 0;
        }

        body::before {
            top: 20px;
            left: 20px;
            transform: rotate(-15deg);
        }

        body::after {
            bottom: 20px;
            right: 20px;
            transform: rotate(15deg);
        }

        .container {
            text-align: center;
            background: white;
            padding: 50px 40px;
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
            border: 2px solid #f4e4e9;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            color: #d4a5a5;
            margin-bottom: 10px;
            font-size: 2.8em;
            font-weight: 700;
        }

        .subtitle {
            font-family: 'Lato', sans-serif;
            color: #8b9467;
            font-size: 1.1em;
            margin-bottom: 30px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .wheel-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 0 auto 30px;
        }

        .wheel {
            width: 100%;
            height: 100%;
            transition: transform 6s cubic-bezier(0.17, 0.67, 0.12, 0.99);
        }

        .wheel svg {
            filter: drop-shadow(0 15px 35px rgba(212, 165, 165, 0.3));
        }

        .wheel-text {
            font-size: 19px;
            font-weight: 700;
            fill: #2c3e50;
            text-anchor: middle;
            dominant-baseline: middle;
            font-family: 'Lato', sans-serif;
            stroke: white;
            stroke-width: 2px;
            paint-order: stroke fill;
        }

        .arrow {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 25px solid transparent;
            border-right: 25px solid transparent;
            border-top: 50px solid #d4a5a5;
            z-index: 10;
            filter: drop-shadow(0 3px 8px rgba(212, 165, 165, 0.4));
        }

        .spin-button {
            background: linear-gradient(135deg, #d4a5a5 0%, #c89595 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 20px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 8px 20px rgba(212, 165, 165, 0.3);
            font-family: 'Lato', sans-serif;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .spin-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 25px rgba(212, 165, 165, 0.4);
            background: linear-gradient(135deg, #c89595 0%, #d4a5a5 100%);
        }

        .spin-button:active {
            transform: translateY(0);
        }

        .spin-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #fdf5f8 100%);
            margin: 8% auto;
            padding: 50px;
            border-radius: 25px;
            width: 90%;
            max-width: 550px;
            text-align: center;
            animation: slideIn 0.4s;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            border: 3px solid #f4e4e9;
            position: relative;
        }

        .modal-content::before {
            content: '‚úø';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #d4a5a5;
            opacity: 0.3;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-80px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-content h2 {
            font-family: 'Playfair Display', serif;
            color: #d4a5a5;
            margin-bottom: 20px;
            font-size: 2.3em;
            font-weight: 700;
        }

        .modal-content.winner h2 {
            color: #8b9467;
        }

        .modal-content.loser h2 {
            color: #c89595;
        }

        .prize {
            font-size: 2.8em;
            font-weight: 700;
            color: #d4a5a5;
            margin: 25px 0;
            font-family: 'Playfair Display', serif;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .modal-content p {
            font-family: 'Lato', sans-serif;
            color: #666;
            line-height: 1.6;
        }

        .form-group {
            margin: 20px 0;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
            font-size: 15px;
            font-family: 'Lato', sans-serif;
        }

        .form-group input {
            width: 100%;
            padding: 14px;
            border: 2px solid #f4e4e9;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s;
            font-family: 'Lato', sans-serif;
            background: #fdfcfc;
        }

        .form-group input:focus {
            outline: none;
            border-color: #d4a5a5;
            background: white;
            box-shadow: 0 0 0 3px rgba(212, 165, 165, 0.1);
        }

        .modal-button {
            background: linear-gradient(135deg, #8b9467 0%, #7a8359 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 18px;
            font-weight: 600;
            border-radius: 50px;
            cursor: pointer;
            margin-top: 25px;
            transition: all 0.3s;
            font-family: 'Lato', sans-serif;
            letter-spacing: 1px;
            text-transform: uppercase;
            box-shadow: 0 5px 15px rgba(139, 148, 103, 0.3);
        }

        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(139, 148, 103, 0.4);
        }

        .flower-emoji {
            font-size: 50px;
            margin: 10px 0;
        }

        @media (max-width: 600px) {
            .wheel-container {
                width: 350px;
                height: 350px;
            }

            h1 {
                font-size: 2em;
            }

            .container {
                padding: 30px 20px;
            }
            
            .wheel-text {
                font-size: 15px;
                stroke-width: 1.5px;
            }

            .modal-content {
                padding: 35px 25px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Roata Norocului</h1>
        <p class="subtitle">The Flower Station</p>
        
        <div class="wheel-container">
            <div class="arrow"></div>
            <div class="wheel" id="wheel">
                <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                    <!-- Outer circle border -->
                    <circle cx="250" cy="250" r="248" fill="none" stroke="#d4a5a5" stroke-width="6"/>
                    
                    <!-- Section 1: -10% (Rose Pink) -->
                    <path d="M 250 250 L 250 2 A 248 248 0 0 1 425.7 74.3 Z" fill="#d4a5a5"/>
                    <text x="320" y="95" class="wheel-text" transform="rotate(22.5 320 95)">-10%</text>
                    
                    <!-- Section 2: Necastigator (Soft Coral) -->
                    <path d="M 250 250 L 425.7 74.3 A 248 248 0 0 1 498 250 Z" fill="#f5b5a8"/>
                    <text x="405" y="180" class="wheel-text" transform="rotate(67.5 405 180)">Nec√¢»ôtigƒÉtor</text>
                    
                    <!-- Section 3: -50 lei (Dusty Rose) -->
                    <path d="M 250 250 L 498 250 A 248 248 0 0 1 425.7 425.7 Z" fill="#e8bdc4"/>
                    <text x="405" y="320" class="wheel-text" transform="rotate(112.5 405 320)">-50 lei</text>
                    
                    <!-- Section 4: Necastigator (Peach) -->
                    <path d="M 250 250 L 425.7 425.7 A 248 248 0 0 1 250 498 Z" fill="#f4d4c8"/>
                    <text x="320" y="405" class="wheel-text" transform="rotate(157.5 320 405)">Nec√¢»ôtigƒÉtor</text>
                    
                    <!-- Section 5: -20% (Warm Beige) -->
                    <path d="M 250 250 L 250 498 A 248 248 0 0 1 74.3 425.7 Z" fill="#e8d5c4"/>
                    <text x="180" y="405" class="wheel-text" transform="rotate(202.5 180 405)">-20%</text>
                    
                    <!-- Section 6: Necastigator (Mauve) -->
                    <path d="M 250 250 L 74.3 425.7 A 248 248 0 0 1 2 250 Z" fill="#c89595"/>
                    <text x="95" y="320" class="wheel-text" transform="rotate(247.5 95 320)">Nec√¢»ôtigƒÉtor</text>
                    
                    <!-- Section 7: -100 lei (Terracotta) -->
                    <path d="M 250 250 L 2 250 A 248 248 0 0 1 74.3 74.3 Z" fill="#b8927d"/>
                    <text x="95" y="180" class="wheel-text" transform="rotate(292.5 95 180)">-100 lei</text>
                    
                    <!-- Section 8: Necastigator (Lavender) -->
                    <path d="M 250 250 L 74.3 74.3 A 248 248 0 0 1 250 2 Z" fill="#d4bfd4"/>
                    <text x="180" y="95" class="wheel-text" transform="rotate(337.5 180 95)">Nec√¢»ôtigƒÉtor</text>
                    
                    <!-- Separator lines -->
                    <line x1="250" y1="250" x2="250" y2="2" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="425.7" y2="74.3" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="498" y2="250" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="425.7" y2="425.7" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="250" y2="498" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="74.3" y2="425.7" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="2" y2="250" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="74.3" y2="74.3" stroke="#f4e4e9" stroke-width="3"/>
                    
                    <!-- Center circle -->
                    <circle cx="250" cy="250" r="35" fill="white" stroke="#d4a5a5" stroke-width="4"/>
                    <circle cx="250" cy="250" r="20" fill="#f4e4e9"/>
                </svg>
            </div>
        </div>

        <button class="spin-button" id="spinButton">√énv√¢rte Roata</button>
    </div>

    <!-- Modal C√¢»ôtigƒÉtor -->
    <div id="winnerModal" class="modal">
        <div class="modal-content winner">
            <div class="flower-emoji">üå∏</div>
            <h2>FelicitƒÉri!</h2>
            <div class="prize" id="prizeText"></div>
            <p style="margin: 25px 0; font-size: 1.05em;">CompleteazƒÉ datele tale pentru a revendica premiul:</p>
            
            <form id="winnerForm">
                <div class="form-group">
                    <label for="firstName">Nume:</label>
                    <input type="text" id="firstName" required>
                </div>
                
                <div class="form-group">
                    <label for="lastName">Prenume:</label>
                    <input type="text" id="lastName" required>
                </div>
                
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" required>
                </div>
                
                <button type="submit" class="modal-button">Trimite</button>
            </form>
        </div>
    </div>

    <!-- Modal Nec√¢»ôtigƒÉtor -->
    <div id="loserModal" class="modal">
        <div class="modal-content loser">
            <div class="flower-emoji">üåø</div>
            <h2>Mul»õumim pentru participare!</h2>
            <p style="font-size: 1.15em; margin: 25px 0; color: #666; line-height: 1.7;">
                Din pƒÉcate, de aceastƒÉ datƒÉ nu ai c√¢»ôtigat.<br>
                Poate data viitoare ai mai mult noroc!
            </p>
            <button class="modal-button" onclick="closeLoserModal()">√énchide</button>
        </div>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const winnerModal = document.getElementById('winnerModal');
        const loserModal = document.getElementById('loserModal');
        const prizeText = document.getElementById('prizeText');
        const winnerForm = document.getElementById('winnerForm');

        // Definirea sec»õiunilor (0-7, unde 0 este sus)
        const sections = [
            { name: '-10%', isWinner: true },          // 0
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false }, // 1
            { name: '-50 lei', isWinner: true },       // 2
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false }, // 3
            { name: '-20%', isWinner: true },          // 4
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false }, // 5
            { name: '-100 lei', isWinner: true },      // 6
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false }  // 7
        ];

        let currentRotation = 0;
        let isSpinning = false;

        spinButton.addEventListener('click', spinWheel);

        function spinWheel() {
            if (isSpinning) return;
            
            isSpinning = true;
            spinButton.disabled = true;

            // Alegem o sec»õiune random (0-7)
            const winningSection = Math.floor(Math.random() * 8);
            
            console.log('üéØ Sec»õiunea aleasƒÉ:', winningSection, '=', sections[winningSection].name);
            
            // Fiecare sec»õiune ocupƒÉ 45 de grade
            const degreesPerSection = 45;
            
            // CalculƒÉm unghiul central exact al sec»õiunii c√¢»ôtigƒÉtoare
            const sectionCenterAngle = (winningSection * degreesPerSection) + (degreesPerSection / 2);
            
            console.log('üìç Centru sec»õiune la:', sectionCenterAngle, '¬∞');
            
            // Rota»õia necesarƒÉ pentru a aduce centrul la sƒÉgeatƒÉ (0¬∞)
            // Pentru a aduce unghiul X la pozi»õia 0¬∞, rotim cu (360 - X)
            const targetAlignment = 360 - sectionCenterAngle;
            
            console.log('üéØ Aliniere »õintƒÉ:', targetAlignment, '¬∞ (pentru a aduce', sectionCenterAngle, '¬∞ la sƒÉgeatƒÉ)');
            
            // CalculƒÉm unde suntem acum (modulo 360)
            const currentAlignment = currentRotation % 360;
            console.log('üìç Aliniere curentƒÉ:', currentAlignment, '¬∞');
            
            // Trebuie sƒÉ ajungem de la currentAlignment la targetAlignment
            // CalculƒÉm diferen»õa, asigur√¢ndu-ne cƒÉ rotim CW (pozitiv)
            let rotationNeeded = targetAlignment - currentAlignment;
            if (rotationNeeded < 0) {
                rotationNeeded += 360; // AsigurƒÉm rota»õie CW
            }
            
            console.log('üîÑ Rota»õie necesarƒÉ pentru aliniere:', rotationNeeded, '¬∞');
            
            // AdƒÉugƒÉm 8-12 rota»õii complete pentru efect
            const fullRotations = 8 + Math.floor(Math.random() * 5);
            const totalRotationToAdd = (fullRotations * 360) + rotationNeeded;
            
            console.log('‚ûï Rota»õie totalƒÉ de adƒÉugat:', totalRotationToAdd, '¬∞ (', fullRotations, 'rota»õii +', rotationNeeded, '¬∞)');
            
            // Rota»õia FINALƒÇ absolutƒÉ (unde vrem sƒÉ ajungem)
            const targetFinalRotation = currentRotation + totalRotationToAdd;
            
            console.log('üéØ Rota»õie finalƒÉ absolutƒÉ:', targetFinalRotation, '¬∞ (modulo:', targetFinalRotation % 360, '¬∞)');
            
            // FAZA 1: Ne oprim APROAPE de final (cu offset fa»õƒÉ de centru)
            const direction = Math.random() > 0.5 ? 1 : -1;
            const offsetFromCenter = direction * (15 + Math.random() * 5);
            
            // Rota»õia pentru FAZA 1 = rota»õia finalƒÉ - offset
            const phase1Rotation = targetFinalRotation - offsetFromCenter;
            
            console.log('‚è∏Ô∏è FAZA 1: Ne oprim la', phase1Rotation, '¬∞ (offset de', offsetFromCenter, '¬∞)');
            
            // AplicƒÉm FAZA 1
            currentRotation = phase1Rotation;
            wheel.style.transition = 'transform 5.5s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
            wheel.style.transform = `rotate(${currentRotation}deg)`;

            // DupƒÉ 5.5 secunde, FAZA 2: salt rapid la centru exact
            setTimeout(() => {
                console.log('‚ö° FAZA 2: Salt rapid la centru');
                
                // AplicƒÉm rota»õia FINALƒÇ exactƒÉ
                currentRotation = targetFinalRotation;
                
                const finalModulo = currentRotation % 360;
                console.log('üéØ Rota»õie finalƒÉ aplicatƒÉ:', currentRotation, '¬∞');
                console.log('üîç Verificare:', finalModulo, '¬∞ (ar trebui sƒÉ fie', targetAlignment, '¬∞)', finalModulo === targetAlignment ? '‚úì' : '‚úó');
                
                wheel.style.transition = 'transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55)';
                wheel.style.transform = `rotate(${currentRotation}deg)`;
                
                // A»ôteptƒÉm 0.8 secunde √Ænainte de modal
                setTimeout(() => {
                    console.log('‚úÖ Rezultat:', sections[winningSection].name, sections[winningSection].isWinner ? 'üéâ C√Ç»òTIGƒÇTOR' : 'üòî NEC√Ç»òTIGƒÇTOR');
                    showResult(winningSection);
                    isSpinning = false;
                    spinButton.disabled = false;
                }, 800);
            }, 5500);
        }

        function showResult(sectionIndex) {
            const result = sections[sectionIndex];
            
            if (result.isWinner) {
                prizeText.textContent = result.name;
                winnerModal.style.display = 'block';
            } else {
                loserModal.style.display = 'block';
            }
        }

        function closeLoserModal() {
            loserModal.style.display = 'none';
        }

        winnerForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            
            const submitButton = winnerForm.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            
            // Disable button »ôi aratƒÉ loading
            submitButton.disabled = true;
            submitButton.textContent = 'Se trimite...';
            
            // Google Forms Action URL »ôi Entry IDs
            const GOOGLE_FORM_ACTION_URL = 'https://docs.google.com/forms/u/0/d/e/1FAIpQLSeaCFRfu3xIPtX0UK-AdOV9tiXD7LUEpoWuBm5FtjUPxNxr0w/formResponse';
            const ENTRY_NUME = 'entry.208498987';
            const ENTRY_PRENUME = 'entry.684244259';
            const ENTRY_EMAIL = 'entry.1888314681';
            const ENTRY_PREMIU = 'entry.1992883041';
            
            const formData = new FormData();
            formData.append(ENTRY_NUME, firstName);
            formData.append(ENTRY_PRENUME, lastName);
            formData.append(ENTRY_EMAIL, email);
            formData.append(ENTRY_PREMIU, prizeText.textContent);
            
            try {
                // Trimite la Google Forms
                await fetch(GOOGLE_FORM_ACTION_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                console.log('‚úÖ Datele au fost trimise cu succes cƒÉtre Google Forms');
                console.log('Date trimise:', {
                    nume: firstName,
                    prenume: lastName,
                    email: email,
                    premiu: prizeText.textContent
                });
                
                // AratƒÉ mesaj de succes
                alert('üéâ FelicitƒÉri!\n\nDatele tale au fost √Ænregistrate cu succes.\nVei primi un email cu codul de reducere √Æn maxim 24 de ore.\n\n‚úâÔ∏è VerificƒÉ inbox-ul (»ôi folderul spam)!');
                
                winnerModal.style.display = 'none';
                winnerForm.reset();
                
            } catch (error) {
                console.error('‚ùå Error:', error);
                alert('‚úÖ Datele tale au fost salvate!\n\nVei primi un email cu codul de reducere √Æn cur√¢nd.');
                winnerModal.style.display = 'none';
                winnerForm.reset();
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }
        });

        // √énchide modalul dacƒÉ dai click √Æn afara lui
        window.onclick = function(event) {
            if (event.target == winnerModal) {
                winnerModal.style.display = 'none';
                winnerForm.reset();
            }
            if (event.target == loserModal) {
                loserModal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
