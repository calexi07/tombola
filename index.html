<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Roata Norocului - The Flower Station</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background: linear-gradient(135deg, #f5f0ed 0%, #fdfbfa 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            text-align: center;
            max-width: 800px;
            width: 100%;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 3em;
            color: #d4a5a5;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .subtitle {
            font-family: 'Lato', sans-serif;
            font-size: 1.2em;
            color: #8b9467;
            margin-bottom: 40px;
            font-weight: 300;
        }

        .wheel-container {
            position: relative;
            width: 500px;
            height: 500px;
            margin: 0 auto 40px;
        }

        .arrow {
            position: absolute;
            left: -30px;
            top: 50%;
            transform: translateY(-50%);
            width: 0;
            height: 0;
            border-top: 25px solid transparent;
            border-bottom: 25px solid transparent;
            border-left: 50px solid #d4a5a5;
            z-index: 10;
            filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
        }

        .wheel {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            position: relative;
            transition: transform 5.5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
            box-shadow: 0 10px 40px rgba(212, 165, 165, 0.3);
        }

        .wheel-text {
            font-family: 'Lato', sans-serif;
            font-size: 17px;
            font-weight: 700;
            fill: #2c3e50;
            stroke: white;
            stroke-width: 2px;
            paint-order: stroke fill;
            text-anchor: middle;
        }

        .spin-button {
            background: linear-gradient(135deg, #8b9467 0%, #7a8359 100%);
            color: white;
            border: none;
            padding: 18px 50px;
            font-size: 1.3em;
            font-weight: 700;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 6px 20px rgba(139, 148, 103, 0.4);
            font-family: 'Lato', sans-serif;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .spin-button:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(139, 148, 103, 0.5);
        }

        .spin-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            overflow-y: auto; /* Enable scrolling */
            padding: 20px 0; /* Add padding for mobile */
        }

        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #fdf5f8 100%);
            margin: 20px auto;
            padding: 40px 30px;
            border-radius: 25px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh; /* Limit height to viewport */
            overflow-y: auto; /* Enable internal scrolling if needed */
            text-align: center;
            animation: slideIn 0.4s;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
            border: 3px solid #f4e4e9;
            position: relative;
        }

        .modal-content::before {
            content: '‚úø';
            position: absolute;
            top: 20px;
            right: 30px;
            font-size: 40px;
            color: #d4a5a5;
            opacity: 0.3;
        }

        @keyframes slideIn {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .flower-emoji {
            font-size: 80px;
            margin-bottom: 20px;
            animation: bounce 1s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #d4a5a5;
        }

        .prize {
            font-size: 2.5em;
            font-weight: 700;
            color: #8b9467;
            margin: 30px 0;
            padding: 25px;
            background: linear-gradient(135deg, #f4e4e9 0%, #ffffff 100%);
            border-radius: 20px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            border: 3px dashed #d4a5a5;
        }

        .form-group {
            margin: 20px 0;
            text-align: left;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #666;
        }

        input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e8d5c4;
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s;
            font-family: 'Lato', sans-serif;
        }

        input:focus {
            outline: none;
            border-color: #d4a5a5;
            box-shadow: 0 0 0 3px rgba(212, 165, 165, 0.1);
        }
        
        .checkbox-group {
            margin: 20px 0;
            text-align: left;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .checkbox-group input[type="checkbox"] {
            width: auto;
            min-width: 20px;
            height: 20px;
            margin-top: 2px;
            cursor: pointer;
            flex-shrink: 0;
        }
        
        .checkbox-group label {
            flex: 1;
            cursor: pointer;
            font-size: 0.95em;
            line-height: 1.5;
        }
        
        .checkbox-group a {
            color: #d4a5a5;
            text-decoration: underline;
            font-weight: 600;
        }
        
        .checkbox-group a:hover {
            color: #c89595;
        }
        
        .error-message {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
            padding: 12px 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-size: 0.95em;
            display: none;
            text-align: left;
            line-height: 1.5;
        }
        
        .error-message.show {
            display: block;
            animation: shake 0.5s;
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
        
        .comeback-message {
            background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
            border: 2px solid #8b9467;
            padding: 20px;
            border-radius: 15px;
            margin-top: 25px;
            text-align: center;
        }
        
        .comeback-message p {
            margin: 10px 0;
            color: #558b2f;
            font-weight: 600;
            font-size: 1.05em;
        }
        
        .countdown-timer {
            font-size: 2em;
            font-weight: 700;
            color: #8b9467;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            letter-spacing: 2px;
        }
        
        .success-message {
            background: linear-gradient(135deg, #e8f5e9 0%, #f1f8e9 100%);
            border: 2px solid #4caf50;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }
        
        .success-message.show {
            display: block;
            animation: slideIn 0.4s;
        }
        
        .success-message h3 {
            color: #2e7d32;
            margin: 0 0 15px 0;
            font-size: 1.5em;
        }
        
        .success-message p {
            color: #558b2f;
            margin: 10px 0;
            line-height: 1.7;
        }

        .modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: rgba(212, 165, 165, 0.1);
            border: 2px solid #d4a5a5;
            color: #d4a5a5;
            font-size: 24px;
            line-height: 30px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }
        
        .modal-close:hover {
            background: #d4a5a5;
            color: white;
            transform: rotate(90deg);
        }

        .modal-button {
            background: linear-gradient(135deg, #d4a5a5 0%, #c89595 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.1em;
            font-weight: 700;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
            box-shadow: 0 5px 15px rgba(212, 165, 165, 0.3);
            width: auto;
        }
        
        .modal-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .modal-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(212, 165, 165, 0.4);
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 2em;
            }
            
            .subtitle {
                font-size: 1em;
            }
            
            .wheel-container {
                width: 90vw;
                max-width: 350px;
                height: 90vw;
                max-height: 350px;
            }
            
            .wheel-text {
                font-size: 13px;
                stroke-width: 1.5px;
            }
            
            .spin-button {
                padding: 15px 35px;
                font-size: 1.1em;
            }
            
            .modal-content {
                padding: 30px 20px;
                margin: 10px auto;
                width: 95%;
                max-height: 85vh;
            }
            
            .modal-content::before {
                font-size: 30px;
                top: 15px;
                right: 20px;
            }
            
            .flower-emoji {
                font-size: 60px;
                margin-bottom: 15px;
            }
            
            h2 {
                font-size: 2em;
                margin-bottom: 15px;
            }
            
            .prize {
                font-size: 2em;
                padding: 20px;
                margin: 20px 0;
            }
            
            .form-group {
                margin: 15px 0;
            }
            
            input {
                padding: 12px;
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .modal-button {
                padding: 12px 30px;
                font-size: 1em;
                width: 100%;
                margin-top: 15px;
            }
            
            .checkbox-group {
                margin: 15px 0;
                gap: 8px;
            }
            
            .checkbox-group label {
                font-size: 0.9em;
            }
            
            .error-message {
                font-size: 0.9em;
                padding: 10px 12px;
            }
            
            .arrow {
                left: -20px;
                border-top: 20px solid transparent;
                border-bottom: 20px solid transparent;
                border-left: 40px solid #d4a5a5;
            }
        }
        
        @media (max-width: 400px) {
            .wheel-container {
                width: 85vw;
                max-width: 300px;
                height: 85vw;
                max-height: 300px;
            }
            
            .wheel-text {
                font-size: 11px;
            }
            
            h1 {
                font-size: 1.8em;
            }
            
            .modal-content {
                padding: 25px 15px;
            }
            
            .checkbox-group label {
                font-size: 0.85em;
            }
            
            .comeback-message {
                padding: 15px;
            }
            
            .comeback-message p {
                font-size: 0.95em;
            }
            
            .countdown-timer {
                font-size: 1.5em;
            }
            
            .success-message {
                padding: 20px 15px;
            }
            
            .success-message h3 {
                font-size: 1.3em;
            }
        }
        
        /* Prevent horizontal scroll */
        body {
            overflow-x: hidden;
            max-width: 100vw;
        }
        
        .container {
            max-width: 100%;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Roata Norocului</h1>
        <p class="subtitle">The Flower Station</p>

        <div class="wheel-container">
            <div class="arrow"></div>
            <div class="wheel" id="wheel">
                <svg viewBox="0 0 500 500" xmlns="http://www.w3.org/2000/svg">
                    <!-- Outer circle border -->
                    <circle cx="250" cy="250" r="248" fill="none" stroke="#d4a5a5" stroke-width="6"/>
                    
                    <!-- Section 0: 15 lei (0¬∞ to 36¬∞) -->
                    <path d="M 250 250 L 250.0 2.0 A 248 248 0 0 1 395.8 49.4 Z" fill="#d4a5a5"/>
                    <text x="299.8" y="96.7" class="wheel-text" transform="rotate(108 299.8 96.7)">15 lei</text>

                    <!-- Section 1: Nec√¢»ôtigƒÉtor (36¬∞ to 72¬∞) -->
                    <path d="M 250 250 L 395.8 49.4 A 248 248 0 0 1 485.9 173.4 Z" fill="#f5b5a8"/>
                    <text x="380.4" y="155.2" class="wheel-text" transform="rotate(144 380.4 155.2)">Nec√¢»ôtigƒÉtor</text>

                    <!-- Section 2: 20 lei (72¬∞ to 108¬∞) -->
                    <path d="M 250 250 L 485.9 173.4 A 248 248 0 0 1 485.9 326.6 Z" fill="#e8bdc4"/>
                    <text x="411.2" y="250.0" class="wheel-text" transform="rotate(180 411.2 250.0)">20 lei</text>

                    <!-- Section 3: Nec√¢»ôtigƒÉtor (108¬∞ to 144¬∞) -->
                    <path d="M 250 250 L 485.9 326.6 A 248 248 0 0 1 395.8 450.6 Z" fill="#f4d4c8"/>
                    <text x="380.4" y="344.8" class="wheel-text" transform="rotate(216 380.4 344.8)">Nec√¢»ôtigƒÉtor</text>

                    <!-- Section 4: 25 lei (144¬∞ to 180¬∞) -->
                    <path d="M 250 250 L 395.8 450.6 A 248 248 0 0 1 250.0 498.0 Z" fill="#e8d5c4"/>
                    <text x="299.8" y="403.3" class="wheel-text" transform="rotate(252 299.8 403.3)">25 lei</text>

                    <!-- Section 5: Nec√¢»ôtigƒÉtor (180¬∞ to 216¬∞) -->
                    <path d="M 250 250 L 250.0 498.0 A 248 248 0 0 1 104.2 450.6 Z" fill="#c89595"/>
                    <text x="200.2" y="403.3" class="wheel-text" transform="rotate(288 200.2 403.3)">Nec√¢»ôtigƒÉtor</text>

                    <!-- Section 6: Cutie Roshen (216¬∞ to 252¬∞) -->
                    <path d="M 250 250 L 104.2 450.6 A 248 248 0 0 1 14.1 326.6 Z" fill="#b8927d"/>
                    <text x="119.6" y="344.8" class="wheel-text" transform="rotate(324 119.6 344.8)">Cutie Roshen</text>

                    <!-- Section 7: Nec√¢»ôtigƒÉtor (252¬∞ to 288¬∞) -->
                    <path d="M 250 250 L 14.1 326.6 A 248 248 0 0 1 14.1 173.4 Z" fill="#d4bfd4"/>
                    <text x="88.8" y="250.0" class="wheel-text" transform="rotate(360 88.8 250.0)">Nec√¢»ôtigƒÉtor</text>

                    <!-- Section 8: 10% (288¬∞ to 324¬∞) -->
                    <path d="M 250 250 L 14.1 173.4 A 248 248 0 0 1 104.2 49.4 Z" fill="#f5d4c8"/>
                    <text x="119.6" y="155.2" class="wheel-text" transform="rotate(396 119.6 155.2)">10%</text>

                    <!-- Section 9: 15% (324¬∞ to 360¬∞) -->
                    <path d="M 250 250 L 104.2 49.4 A 248 248 0 0 1 250.0 2.0 Z" fill="#e8c4d4"/>
                    <text x="200.2" y="96.7" class="wheel-text" transform="rotate(432 200.2 96.7)">15%</text>

                    <!-- Separator lines -->
                    <line x1="250" y1="250" x2="250.0" y2="2.0" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="395.8" y2="49.4" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="485.9" y2="173.4" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="485.9" y2="326.6" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="395.8" y2="450.6" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="250.0" y2="498.0" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="104.2" y2="450.6" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="14.1" y2="326.6" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="14.1" y2="173.4" stroke="#f4e4e9" stroke-width="3"/>
                    <line x1="250" y1="250" x2="104.2" y2="49.4" stroke="#f4e4e9" stroke-width="3"/>
                    
                    <!-- Center circle -->
                    <circle cx="250" cy="250" r="35" fill="white" stroke="#d4a5a5" stroke-width="4"/>
                    <circle cx="250" cy="250" r="20" fill="#f4e4e9"/>
                </svg>
            </div>
        </div>

        <button class="spin-button" id="spinButton">√énv√¢rte Roata</button>
    </div>

    <!-- Modal C√¢»ôtigƒÉtor -->
    <div id="winnerModal" class="modal">
        <div class="modal-content winner">
            <span class="modal-close" onclick="closeWinnerModal()">√ó</span>
            <div class="flower-emoji">üå∏</div>
            <h2>FelicitƒÉri!</h2>
            <div class="prize" id="prizeText"></div>
            
            <div id="winnerFormContainer">
                <p style="margin: 25px 0; font-size: 1.05em;">CompleteazƒÉ datele tale pentru a revendica premiul:</p>
                
                <form id="winnerForm">
                    <div id="errorMessage" class="error-message">
                        ‚ö†Ô∏è Te rugƒÉm sƒÉ completezi toate c√¢mpurile »ôi sƒÉ accep»õi termenii »ôi condi»õiile.
                    </div>
                    
                    <div class="form-group">
                        <label for="firstName">Nume:</label>
                        <input type="text" id="firstName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="lastName">Prenume:</label>
                        <input type="text" id="lastName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email:</label>
                        <input type="email" id="email" required>
                    </div>
                    
                    <div class="checkbox-group">
                        <input type="checkbox" id="termsCheckbox" required>
                        <label for="termsCheckbox">
                            Sunt de acord cu <a href="https://theflowerstation.ro/pages/termeni-si-conditii-roata-norocului" target="_blank">termenii »ôi condi»õiile</a> campaniei Roata Norocului.
                        </label>
                    </div>
                    
                    <button type="submit" class="modal-button">Trimite</button>
                </form>
            </div>
            
            <div id="successMessage" class="success-message">
                <h3>‚úÖ Datele au fost trimise!</h3>
                <p>Vei primi un email cu codul de reducere √Æn maxim 24 de ore.</p>
                <p style="font-size: 0.95em;">üìß VerificƒÉ inbox-ul »ôi folderul spam.</p>
            </div>
            
            <div class="comeback-message">
                <p>üé∞ Vrei sƒÉ c√¢»ôtigi din nou?</p>
                <p>Revino m√¢ine pentru o nouƒÉ »ôansƒÉ!</p>
                <div class="countdown-timer" id="winnerCountdown">00:00:00</div>
            </div>
        </div>
    </div>

    <!-- Modal Nec√¢»ôtigƒÉtor -->
    <div id="loserModal" class="modal">
        <div class="modal-content loser">
            <span class="modal-close" onclick="closeLoserModal()">√ó</span>
            <div class="flower-emoji">üåø</div>
            <h2>Mul»õumim pentru participare!</h2>
            <p style="font-size: 1.15em; margin: 25px 0; color: #666; line-height: 1.7;">
                Din pƒÉcate, de aceastƒÉ datƒÉ nu ai c√¢»ôtigat.<br>
                Dar nu te descuraja!
            </p>
            
            <div class="comeback-message">
                <p>üé∞ √éncearcƒÉ din nou m√¢ine!</p>
                <p>Poate vei avea mai mult noroc.</p>
                <div class="countdown-timer" id="loserCountdown">00:00:00</div>
            </div>
            
            <button class="modal-button" onclick="closeLoserModal()">√énchide</button>
        </div>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const winnerModal = document.getElementById('winnerModal');
        const loserModal = document.getElementById('loserModal');
        const prizeText = document.getElementById('prizeText');
        const winnerForm = document.getElementById('winnerForm');

        // ===== DAILY LIMIT SYSTEM =====
        const STORAGE_KEY = 'tombolaLastSpin';
        
        function checkDailyLimit() {
            const lastSpin = localStorage.getItem(STORAGE_KEY);
            
            if (!lastSpin) {
                return { canSpin: true, timeLeft: 0 };
            }
            
            const lastSpinDate = new Date(parseInt(lastSpin));
            const now = new Date();
            
            // Calculate next midnight (00:00)
            const nextMidnight = new Date(now);
            nextMidnight.setHours(24, 0, 0, 0);
            
            // Check if last spin was today
            const isToday = lastSpinDate.toDateString() === now.toDateString();
            
            if (isToday) {
                const timeLeft = nextMidnight - now;
                return { canSpin: false, timeLeft: timeLeft };
            }
            
            return { canSpin: true, timeLeft: 0 };
        }
        
        function formatTimeLeft(milliseconds) {
            const hours = Math.floor(milliseconds / (1000 * 60 * 60));
            const minutes = Math.floor((milliseconds % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((milliseconds % (1000 * 60)) / 1000);
            
            return `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateSpinButton() {
            const { canSpin, timeLeft } = checkDailyLimit();
            
            if (!canSpin) {
                spinButton.disabled = true;
                spinButton.textContent = `Revino √Æn ${formatTimeLeft(timeLeft)}`;
                
                // Update countdown every second
                const intervalId = setInterval(() => {
                    const { canSpin: newCanSpin, timeLeft: newTimeLeft } = checkDailyLimit();
                    
                    if (newCanSpin) {
                        spinButton.disabled = false;
                        spinButton.textContent = '√énv√¢rte Roata';
                        clearInterval(intervalId);
                    } else {
                        spinButton.textContent = `Revino √Æn ${formatTimeLeft(newTimeLeft)}`;
                    }
                }, 1000);
            }
        }
        
        function markSpinUsed() {
            localStorage.setItem(STORAGE_KEY, Date.now().toString());
        }
        
        // Check on page load
        updateSpinButton();

        // Sec»õiunile ro»õii - 10 sec»õiuni totale
        // Pentru 70% nec√¢»ôtigƒÉtor: 7 sec»õiuni nec√¢»ôtigƒÉtor, 3 sec»õiuni c√¢»ôtigƒÉtor
        const sections = [
            { name: '15 lei', isWinner: true, type: 'lei', value: 15 },           // 0
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false },                            // 1
            { name: '20 lei', isWinner: true, type: 'lei', value: 20 },           // 2
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false },                            // 3
            { name: '25 lei', isWinner: true, type: 'lei', value: 25 },           // 4
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false },                            // 5
            { name: 'Cutie Roshen Cherry', isWinner: true, type: 'produs', value: 0 }, // 6
            { name: 'Nec√¢»ôtigƒÉtor', isWinner: false },                            // 7
            { name: '10%', isWinner: true, type: 'procent', value: 10 },          // 8
            { name: '15%', isWinner: true, type: 'procent', value: 15 }           // 9
        ];
        
        // Fiecare sec»õiune = 360¬∞ / 10 = 36¬∞
        const degreesPerSection = 360 / sections.length;

        let currentRotation = 0;
        let isSpinning = false;

        spinButton.addEventListener('click', spinWheel);

        function spinWheel() {
            if (isSpinning) return;
            
            // Check daily limit
            const { canSpin } = checkDailyLimit();
            if (!canSpin) {
                alert('‚è∞ Ai folosit deja roata astƒÉzi!\n\nRevino m√¢ine pentru o nouƒÉ »ôansƒÉ la c√¢»ôtig.');
                return;
            }
            
            isSpinning = true;
            spinButton.disabled = true;
            
            // Mark this spin as used
            markSpinUsed();
            
            // Update button to show countdown
            updateSpinButton();

            // Logica probabilisticƒÉ: 70% nec√¢»ôtigƒÉtor, 30% c√¢»ôtigƒÉtor
            const random = Math.random();
            let winningSection;
            
            if (random < 0.7) {
                // 70% chance - alege o sec»õiune nec√¢»ôtigƒÉtor (1, 3, 5, 7)
                const loserSections = [1, 3, 5, 7];
                winningSection = loserSections[Math.floor(Math.random() * loserSections.length)];
            } else {
                // 30% chance - alege o sec»õiune c√¢»ôtigƒÉtor (0, 2, 4, 6, 8, 9)
                const winnerSections = [0, 2, 4, 6, 8, 9];
                winningSection = winnerSections[Math.floor(Math.random() * winnerSections.length)];
            }
            
            console.log('üéØ Sec»õiunea aleasƒÉ:', winningSection, '=', sections[winningSection].name);
            
            // CalculƒÉm unghiul central exact al sec»õiunii c√¢»ôtigƒÉtoare
            // IMPORTANT: SVG-ul nostru e desenat cu 0¬∞ SUS (am transformat √Æn calcule cu -90¬∞)
            // Dar trebuie sƒÉ »õinem cont cƒÉ prima sec»õiune (index 0) √Æncepe la 0¬∞ √Æn array nostru
            // ceea ce corespunde cu 0¬∞ = SUS √Æn SVG (dupƒÉ transformarea -90¬∞ √Æn calcule)
            const sectionCenterAngle = (winningSection * degreesPerSection) + (degreesPerSection / 2);
            
            console.log('üìç Centru sec»õiune la:', sectionCenterAngle, '¬∞');
            
            // AdƒÉugƒÉm 8-12 rota»õii complete
            const fullRotations = 8 + Math.floor(Math.random() * 5);
            const baseRotation = fullRotations * 360;
            
            // SƒÇGEATA E LA ST√ÇNGA = ceea ce √ÆnseamnƒÉ 270¬∞ √Æn coordonate roatƒÉ (nu 180¬∞!)
            // Explica»õie: DacƒÉ 0¬∞ = SUS, atunci:
            // - 90¬∞ = DREAPTA
            // - 180¬∞ = JOS  
            // - 270¬∞ = ST√ÇNGA ‚Üê aici e sƒÉgeata!
            
            // Pentru a aduce centrul sec»õiunii la sƒÉgeatƒÉ (270¬∞), rotim cu (270 - sectionCenterAngle)
            let targetAlignment = 270 - sectionCenterAngle;
            if (targetAlignment < 0) {
                targetAlignment += 360;
            }
            
            console.log('üéØ Aliniere »õintƒÉ:', targetAlignment, '¬∞ (pentru a aduce', sectionCenterAngle, '¬∞ la sƒÉgeatƒÉ st√¢nga - 270¬∞)');
            
            // CalculƒÉm unde suntem acum (modulo 360)
            const currentAlignment = currentRotation % 360;
            console.log('üìç Aliniere curentƒÉ:', currentAlignment, '¬∞');
            
            // Trebuie sƒÉ ajungem de la currentAlignment la targetAlignment
            // CalculƒÉm diferen»õa, asigur√¢ndu-ne cƒÉ rotim CW (pozitiv)
            let rotationNeeded = targetAlignment - currentAlignment;
            if (rotationNeeded < 0) {
                rotationNeeded += 360;
            }
            
            console.log('üîÑ Rota»õie necesarƒÉ pentru aliniere:', rotationNeeded, '¬∞');
            
            // AdƒÉugƒÉm rota»õiile complete pentru efect
            const totalRotationToAdd = baseRotation + rotationNeeded;
            
            console.log('‚ûï Rota»õie totalƒÉ de adƒÉugat:', totalRotationToAdd, '¬∞ (', fullRotations, 'rota»õii +', rotationNeeded, '¬∞)');
            
            // Rota»õia FINALƒÇ absolutƒÉ (unde vrem sƒÉ ajungem)
            const targetFinalRotation = currentRotation + totalRotationToAdd;
            
            console.log('üéØ Rota»õie finalƒÉ absolutƒÉ:', targetFinalRotation, '¬∞ (modulo:', targetFinalRotation % 360, '¬∞)');
            
            // FAZA 1: Ne oprim APROAPE de final (cu offset fa»õƒÉ de centru)
            const direction = Math.random() > 0.5 ? 1 : -1;
            const offsetFromCenter = direction * (15 + Math.random() * 5);
            
            // Rota»õia pentru FAZA 1 = rota»õia finalƒÉ - offset
            const phase1Rotation = targetFinalRotation - offsetFromCenter;
            
            console.log('‚è∏Ô∏è FAZA 1: Ne oprim la', phase1Rotation, '¬∞ (offset de', offsetFromCenter, '¬∞)');
            
            // AplicƒÉm FAZA 1
            currentRotation = phase1Rotation;
            wheel.style.transition = 'transform 5.5s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
            wheel.style.transform = `rotate(${currentRotation}deg)`;

            // DupƒÉ 5.5 secunde, FAZA 2: salt rapid la centru exact
            setTimeout(() => {
                console.log('‚ö° FAZA 2: Salt rapid la centru');
                
                // AplicƒÉm rota»õia FINALƒÇ exactƒÉ
                currentRotation = targetFinalRotation;
                
                const finalModulo = currentRotation % 360;
                console.log('üéØ Rota»õie finalƒÉ aplicatƒÉ:', currentRotation, '¬∞');
                console.log('üîç Verificare:', finalModulo, '¬∞ (ar trebui sƒÉ fie', targetAlignment, '¬∞)', Math.abs(finalModulo - targetAlignment) < 1 ? '‚úì' : '‚úó');
                
                wheel.style.transition = 'transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55)';
                wheel.style.transform = `rotate(${currentRotation}deg)`;
                
                // A»ôteptƒÉm 0.8 secunde √Ænainte de modal
                setTimeout(() => {
                    console.log('‚úÖ Rezultat:', sections[winningSection].name, sections[winningSection].isWinner ? 'üéâ C√Ç»òTIGƒÇTOR' : 'üòî NEC√Ç»òTIGƒÇTOR');
                    showResult(winningSection);
                    isSpinning = false;
                    spinButton.disabled = false;
                }, 800);
            }, 5500);
        }

        function showResult(sectionIndex) {
            const result = sections[sectionIndex];
            
            if (result.isWinner) {
                prizeText.textContent = result.name;
                winnerModal.style.display = 'block';
                startCountdown('winnerCountdown');
            } else {
                loserModal.style.display = 'block';
                startCountdown('loserCountdown');
            }
        }
        
        function startCountdown(elementId) {
            const element = document.getElementById(elementId);
            
            function updateTimer() {
                const { timeLeft } = checkDailyLimit();
                element.textContent = formatTimeLeft(timeLeft);
            }
            
            updateTimer();
            const intervalId = setInterval(() => {
                const { canSpin } = checkDailyLimit();
                
                if (canSpin) {
                    element.textContent = '00:00:00';
                    clearInterval(intervalId);
                } else {
                    updateTimer();
                }
            }, 1000);
        }

        function closeLoserModal() {
            loserModal.style.display = 'none';
        }
        
        function closeWinnerModal() {
            winnerModal.style.display = 'none';
            winnerForm.reset();
            
            // Reset form visibility
            document.getElementById('winnerFormContainer').style.display = 'block';
            document.getElementById('successMessage').classList.remove('show');
            document.getElementById('errorMessage').classList.remove('show');
        }

        // Form submission
        winnerForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const firstName = document.getElementById('firstName').value.trim();
            const lastName = document.getElementById('lastName').value.trim();
            const email = document.getElementById('email').value.trim();
            const termsCheckbox = document.getElementById('termsCheckbox');
            const errorMessage = document.getElementById('errorMessage');
            
            // Reset error message
            errorMessage.classList.remove('show');
            
            // Validation
            if (!firstName || !lastName || !email) {
                errorMessage.textContent = '‚ö†Ô∏è Te rugƒÉm sƒÉ completezi toate c√¢mpurile obligatorii.';
                errorMessage.classList.add('show');
                
                // Scroll to error message
                errorMessage.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                return;
            }
            
            if (!termsCheckbox.checked) {
                errorMessage.textContent = '‚ö†Ô∏è Trebuie sƒÉ fii de acord cu termenii »ôi condi»õiile pentru a continua.';
                errorMessage.classList.add('show');
                
                // Scroll to checkbox
                termsCheckbox.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                return;
            }
            
            // Email validation
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                errorMessage.textContent = '‚ö†Ô∏è Te rugƒÉm sƒÉ introduci o adresƒÉ de email validƒÉ.';
                errorMessage.classList.add('show');
                return;
            }
            
            const submitButton = winnerForm.querySelector('button[type="submit"]');
            const originalText = submitButton.textContent;
            
            // Disable button »ôi aratƒÉ loading
            submitButton.disabled = true;
            submitButton.textContent = 'Se trimite...';
            
            // Google Forms Action URL »ôi Entry IDs
            const GOOGLE_FORM_ACTION_URL = 'https://docs.google.com/forms/u/0/d/e/1FAIpQLSeaCFRfu3xIPtX0UK-AdOV9tiXD7LUEpoWuBm5FtjUPxNxr0w/formResponse';
            const ENTRY_NUME = 'entry.208498987';
            const ENTRY_PRENUME = 'entry.684244259';
            const ENTRY_EMAIL = 'entry.1888314681';
            const ENTRY_PREMIU = 'entry.1992883041';
            
            const formData = new FormData();
            formData.append(ENTRY_NUME, firstName);
            formData.append(ENTRY_PRENUME, lastName);
            formData.append(ENTRY_EMAIL, email);
            formData.append(ENTRY_PREMIU, prizeText.textContent);
            
            try {
                // Trimite la Google Forms
                await fetch(GOOGLE_FORM_ACTION_URL, {
                    method: 'POST',
                    mode: 'no-cors',
                    body: formData
                });
                
                console.log('‚úÖ Datele au fost trimise cu succes cƒÉtre Google Forms');
                console.log('Date trimise:', {
                    nume: firstName,
                    prenume: lastName,
                    email: email,
                    premiu: prizeText.textContent,
                    termeniAcceptati: true
                });
                
                // Hide form and show success message
                document.getElementById('winnerFormContainer').style.display = 'none';
                document.getElementById('successMessage').classList.add('show');
                
            } catch (error) {
                console.error('‚ùå Error:', error);
                
                // Still show success (no-cors doesn't give us error feedback)
                document.getElementById('winnerFormContainer').style.display = 'none';
                document.getElementById('successMessage').classList.add('show');
            } finally {
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }
        });

        // Close modals when clicking outside
        window.onclick = function(event) {
            if (event.target == winnerModal) {
                winnerModal.style.display = 'none';
            }
            if (event.target == loserModal) {
                loserModal.style.display = 'none';
            }
        }
    </script>
</body>
</html>
